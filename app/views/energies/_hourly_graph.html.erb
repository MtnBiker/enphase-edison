<!-- app/views/energies/_hourly_graph.erb.html -->
<hr class="border-bottom border-3 border-dark">

<div class="text-center font-weight-bold">
  <h4>Hour by Hour</h4>
  
  <% time_span = Date.today.last_month.beginning_of_month..Date.today.last_month.beginning_of_month + 24.hour %>
   <%= line_chart [
     {name: "Enphase Produced", data: HourByHour.where(datetime: time_span).pluck(:datetime, :enphase)},
     {name: "Sent to SCE", data: HourByHour.where(datetime: time_span).pluck(:datetime, :to_sce)},
     {name: "From SCE", data: HourByHour.where(datetime: time_span).pluck(:datetime, :from_sce)},
     {name: "Used", data: HourByHour.where(datetime: time_span).pluck(:datetime, :used)}
    ]%>    
</div>

<hr class="border-bottom border-3 border-dark">
